{"version":3,"file":"localstorage-utils.js","sources":["../../../analytics-util-storage-global/dist/analytics-util-global-storage.module.js","../../src/index.js"],"sourcesContent":["var l=\"global\",o=\"undefined\",e=\"object\"==typeof self&&self.self===self&&self||\"object\"==typeof global&&global.global===global&&global||void 0;function f(l){return e[l]}function n(l,o){return e[l]=o,o}function t(l){n(l)}export{l as GLOBAL,f as get,e as globalContext,t as remove,n as set,o as undef};\n//# sourceMappingURL=analytics-util-global-storage.module.js.map\n","import { get, set, remove, undef } from '@analytics/global-storage-utils'\n\nconst LOCAL_STORAGE = 'localStorage'\n\nlet isSupported = hasLocalStorage()\n\n/**\n * Check if browser has access to LocalStorage\n * @returns {Boolean}\n */\nfunction hasLocalStorage() {\n  if (typeof isSupported !== undef) return isSupported\n  isSupported = true\n  try {\n    if (typeof localStorage === undef || typeof JSON === undef) {\n      isSupported = false\n    }\n    // test for safari private\n    localStorage.setItem(undef, undef)\n    localStorage.removeItem(undef)\n  } catch (err) {\n    isSupported = false\n  }\n  return isSupported\n}\n\n/**\n * Get value from localStorage or fallback to global window\n * @param {string} key - Key of value to get\n * @returns {*} value\n */\nfunction getItem(key) {\n  return isSupported ? localStorage.getItem(key) : get(key)\n}\n\n/**\n * Set value to localStorage or fallback to global window\n * @param {string} key - Key of value to set\n * @param {*} value \n * @returns value\n */\nfunction setItem(key, value) {\n  return isSupported ? localStorage.setItem(key, value) : set(key, value)\n}\n\n/**\n * Remove value from localStorage or fallback to global window\n * @param {string} key - Key of value to remove\n */\nfunction removeItem(key) {\n  return isSupported ? localStorage.removeItem(key) : remove(key)\n}\n\nexport {\n  LOCAL_STORAGE,\n  hasLocalStorage,\n  getItem,\n  setItem,\n  removeItem\n}"],"names":["undef","globalContext","self","global","set","key","value","isSupported","hasLocalStorage","localStorage","JSON","setItem","removeItem","err","getItem"],"mappings":"qCAEaA,EAAQ,YAERC,EACM,iBAATC,MAAqBA,KAAKA,OAASA,MAAQA,MAChC,iBAAXC,QAAuBA,OAAOA,SAAWA,QAAUA,aAAAA,WAkB7CC,EAAIC,EAAKC,GAEvB,OADAL,EAAcI,GAAOC,EACdA,MCtBLC,EAAcC,IAMlB,SAASA,IACP,UAAWD,IAAgBP,EAAO,OAAOO,EACzCA,GAAc,EACd,WACaE,eAAiBT,UAAgBU,OAASV,IACnDO,GAAc,GAGhBE,aAAaE,QAAQX,EAAOA,GAC5BS,aAAaG,WAAWZ,GACxB,MAAOa,GACPN,GAAc,EAEhB,OAAOA,yBArBa,yBA6BtB,SAAiBF,GACf,OAAOE,EAAcE,aAAaK,QAAQT,GDjBnCJ,ECiB8CI,qCAiBvD,SAAoBA,GAClB,OAAOE,EAAcE,aAAaG,WAAWP,QDhB7CD,ECgB2DC,cAT7D,SAAiBA,EAAKC,GACpB,OAAOC,EAAcE,aAAaE,QAAQN,EAAKC,GAASF,EAAIC,EAAKC"}