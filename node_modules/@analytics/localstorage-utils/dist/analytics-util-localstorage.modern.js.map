{"version":3,"file":"analytics-util-localstorage.modern.js","sources":["../src/index.js"],"sourcesContent":["import { get, set, remove, undef } from '@analytics/global-storage-utils'\n\nconst LOCAL_STORAGE = 'localStorage'\n\nlet isSupported = hasLocalStorage()\n\n/**\n * Check if browser has access to LocalStorage\n * @returns {Boolean}\n */\nfunction hasLocalStorage() {\n  if (typeof isSupported !== undef) return isSupported\n  isSupported = true\n  try {\n    if (typeof localStorage === undef || typeof JSON === undef) {\n      isSupported = false\n    }\n    // test for safari private\n    localStorage.setItem(undef, undef)\n    localStorage.removeItem(undef)\n  } catch (err) {\n    isSupported = false\n  }\n  return isSupported\n}\n\n/**\n * Get value from localStorage or fallback to global window\n * @param {string} key - Key of value to get\n * @returns {*} value\n */\nfunction getItem(key) {\n  return isSupported ? localStorage.getItem(key) : get(key)\n}\n\n/**\n * Set value to localStorage or fallback to global window\n * @param {string} key - Key of value to set\n * @param {*} value \n * @returns value\n */\nfunction setItem(key, value) {\n  return isSupported ? localStorage.setItem(key, value) : set(key, value)\n}\n\n/**\n * Remove value from localStorage or fallback to global window\n * @param {string} key - Key of value to remove\n */\nfunction removeItem(key) {\n  return isSupported ? localStorage.removeItem(key) : remove(key)\n}\n\nexport {\n  LOCAL_STORAGE,\n  hasLocalStorage,\n  getItem,\n  setItem,\n  removeItem\n}"],"names":["LOCAL_STORAGE","isSupported","hasLocalStorage","undef","localStorage","JSON","setItem","removeItem","err","getItem","key","get","value","set","remove"],"mappings":"sFAEMA,MAAAA,EAAgB,eAEtB,IAAIC,EAAcC,IAMlB,SAASA,IACP,UAAWD,IAAgBE,EAAO,OAAOF,EACzCA,GAAc,EACd,WACaG,eAAiBD,UAAgBE,OAASF,IACnDF,GAAc,GAGhBG,aAAaE,QAAQH,EAAOA,GAC5BC,aAAaG,WAAWJ,GACxB,MAAOK,GACPP,GAAc,EAEhB,OAAOA,EAQT,SAASQ,EAAQC,GACf,OAAOT,EAAcG,aAAaK,QAAQC,GAAOC,EAAID,GASvD,SAASJ,EAAQI,EAAKE,GACpB,OAAOX,EAAcG,aAAaE,QAAQI,EAAKE,GAASC,EAAIH,EAAKE,GAOnE,SAASL,EAAWG,GAClB,OAAOT,EAAcG,aAAaG,WAAWG,GAAOI,EAAOJ"}