var e=require("@analytics/global-storage-utils"),t=require("@analytics/cookie-utils"),r=require("@analytics/localstorage-utils"),o=require("@analytics/type-utils");function n(e){var t=e;try{if("true"===(t=JSON.parse(e)))return!0;if("false"===t)return!1;if(o.isObject(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch(e){}if(null!==t&&""!==t)return t}var i=r.hasLocalStorage(),a=t.hasCookies();function u(r,i){if(r){var a=s(i),u=!g(a),l=f(a)?n(localStorage.getItem(r)):void 0;if(u&&!o.isUndefined(l))return l;var c=O(a)?n(t.getCookie(r)):void 0;if(u&&c)return c;var L=e.get(r);return u?L:{localStorage:l,cookie:c,global:L}}}function l(i,a,u){if(i&&!o.isUndefined(a)){var l={},c=s(u),L=JSON.stringify(a),b=!g(c);return f(c)&&(l[r.LOCAL_STORAGE]=p(r.LOCAL_STORAGE,a,n(localStorage.getItem(i))),localStorage.setItem(i,L),b)?l[r.LOCAL_STORAGE]:O(c)&&(l[t.COOKIE]=p(t.COOKIE,a,n(t.getCookie(i))),t.setCookie(i,L),b)?l[t.COOKIE]:(l[e.GLOBAL]=p(e.GLOBAL,a,e.get(i)),e.set(i,a),b?l[e.GLOBAL]:l)}}function c(n,i){if(n){var a=s(i),l=u(n,o.ALL),c={};return!o.isUndefined(l.localStorage)&&f(a)&&(localStorage.removeItem(n),c[r.LOCAL_STORAGE]=l.localStorage),!o.isUndefined(l.cookie)&&O(a)&&(t.removeCookie(n),c[t.COOKIE]=l.cookie),!o.isUndefined(l.global)&&L(a,e.GLOBAL)&&(e.remove(n),c[e.GLOBAL]=l.global),c}}function s(e){return e?o.isString(e)?e:e.storage:o.ANY}function f(e){return i&&L(e,r.LOCAL_STORAGE)}function O(e){return a&&L(e,t.COOKIE)}function g(e){return e===o.ALL||"all"===e}function L(e,t){return e===o.ANY||e===t||g(e)}function p(e,t,r){return{location:e,current:t,previous:r}}var b={setItem:l,getItem:u,removeItem:c};Object.defineProperty(exports,"GLOBAL",{enumerable:!0,get:function(){return e.GLOBAL}}),Object.defineProperty(exports,"globalContext",{enumerable:!0,get:function(){return e.globalContext}}),Object.defineProperty(exports,"COOKIE",{enumerable:!0,get:function(){return t.COOKIE}}),Object.defineProperty(exports,"getCookie",{enumerable:!0,get:function(){return t.getCookie}}),Object.defineProperty(exports,"hasCookies",{enumerable:!0,get:function(){return t.hasCookies}}),Object.defineProperty(exports,"removeCookie",{enumerable:!0,get:function(){return t.removeCookie}}),Object.defineProperty(exports,"setCookie",{enumerable:!0,get:function(){return t.setCookie}}),Object.defineProperty(exports,"LOCAL_STORAGE",{enumerable:!0,get:function(){return r.LOCAL_STORAGE}}),Object.defineProperty(exports,"hasLocalStorage",{enumerable:!0,get:function(){return r.hasLocalStorage}}),Object.defineProperty(exports,"ALL",{enumerable:!0,get:function(){return o.ALL}}),Object.defineProperty(exports,"ANY",{enumerable:!0,get:function(){return o.ANY}}),exports.default=b,exports.getItem=u,exports.removeItem=c,exports.setItem=l;
//# sourceMappingURL=analytics-util-storage.js.map
