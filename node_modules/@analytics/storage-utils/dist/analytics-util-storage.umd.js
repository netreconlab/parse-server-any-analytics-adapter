!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@analytics/global-storage-utils"),require("@analytics/cookie-utils"),require("@analytics/localstorage-utils"),require("@analytics/type-utils")):"function"==typeof define&&define.amd?define(["exports","@analytics/global-storage-utils","@analytics/cookie-utils","@analytics/localstorage-utils","@analytics/type-utils"],t):t((e||self).utilStorage={},e.globalStorageUtils,e.cookieUtils,e.localstorageUtils,e.typeUtils)}(this,function(e,t,o,r,n){function i(e){var t=e;try{if("true"===(t=JSON.parse(e)))return!0;if("false"===t)return!1;if(n.isObject(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch(e){}if(null!==t&&""!==t)return t}var a=r.hasLocalStorage(),l=o.hasCookies();function u(e,r){if(e){var a=s(r),l=!L(a),u=g(a)?i(localStorage.getItem(e)):void 0;if(l&&!n.isUndefined(u))return u;var c=O(a)?i(o.getCookie(e)):void 0;if(l&&c)return c;var f=t.get(e);return l?f:{localStorage:u,cookie:c,global:f}}}function c(e,a,l){if(e&&!n.isUndefined(a)){var u={},c=s(l),f=JSON.stringify(a),b=!L(c);return g(c)&&(u[r.LOCAL_STORAGE]=d(r.LOCAL_STORAGE,a,i(localStorage.getItem(e))),localStorage.setItem(e,f),b)?u[r.LOCAL_STORAGE]:O(c)&&(u[o.COOKIE]=d(o.COOKIE,a,i(o.getCookie(e))),o.setCookie(e,f),b)?u[o.COOKIE]:(u[t.GLOBAL]=d(t.GLOBAL,a,t.get(e)),t.set(e,a),b?u[t.GLOBAL]:u)}}function f(e,i){if(e){var a=s(i),l=u(e,n.ALL),c={};return!n.isUndefined(l.localStorage)&&g(a)&&(localStorage.removeItem(e),c[r.LOCAL_STORAGE]=l.localStorage),!n.isUndefined(l.cookie)&&O(a)&&(o.removeCookie(e),c[o.COOKIE]=l.cookie),!n.isUndefined(l.global)&&b(a,t.GLOBAL)&&(t.remove(e),c[t.GLOBAL]=l.global),c}}function s(e){return e?n.isString(e)?e:e.storage:n.ANY}function g(e){return a&&b(e,r.LOCAL_STORAGE)}function O(e){return l&&b(e,o.COOKIE)}function L(e){return e===n.ALL||"all"===e}function b(e,t){return e===n.ANY||e===t||L(e)}function d(e,t,o){return{location:e,current:t,previous:o}}var m={setItem:c,getItem:u,removeItem:f};Object.defineProperty(e,"GLOBAL",{enumerable:!0,get:function(){return t.GLOBAL}}),Object.defineProperty(e,"globalContext",{enumerable:!0,get:function(){return t.globalContext}}),Object.defineProperty(e,"COOKIE",{enumerable:!0,get:function(){return o.COOKIE}}),Object.defineProperty(e,"getCookie",{enumerable:!0,get:function(){return o.getCookie}}),Object.defineProperty(e,"hasCookies",{enumerable:!0,get:function(){return o.hasCookies}}),Object.defineProperty(e,"removeCookie",{enumerable:!0,get:function(){return o.removeCookie}}),Object.defineProperty(e,"setCookie",{enumerable:!0,get:function(){return o.setCookie}}),Object.defineProperty(e,"LOCAL_STORAGE",{enumerable:!0,get:function(){return r.LOCAL_STORAGE}}),Object.defineProperty(e,"hasLocalStorage",{enumerable:!0,get:function(){return r.hasLocalStorage}}),Object.defineProperty(e,"ALL",{enumerable:!0,get:function(){return n.ALL}}),Object.defineProperty(e,"ANY",{enumerable:!0,get:function(){return n.ANY}}),e.default=m,e.getItem=u,e.removeItem=f,e.setItem=c});
//# sourceMappingURL=analytics-util-storage.umd.js.map
