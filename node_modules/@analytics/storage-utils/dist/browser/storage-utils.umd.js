!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).utilStorage={})}(this,function(e){var t="global",o="undefined",n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||void 0;function r(e){return n[e]}function i(e,t){return n[e]=t,t}function a(e){i(e)}var l="cookie",u=g(),f=s,c=s;function d(e){return u?s(e,"",-1):a(e)}function g(){if(typeof u!==o)return u;try{s("__x","__x"),u=-1!==document.cookie.indexOf("__x"),d("__x")}catch(e){u=!1}return u}function s(e,t,n,a,l,f){if(typeof window!==o){var c=arguments.length>1;return u||(c?i(e,t):r(e)),c?document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(a?"; path="+a:"")+(l?"; domain="+l:"")+(f?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}}var p="localStorage",v=m();function m(){if(typeof v!==o)return v;v=!0;try{typeof localStorage!==o&&typeof JSON!==o||(v=!1),localStorage.setItem(o,o),localStorage.removeItem(o)}catch(e){v=!1}return v}var y="any";"undefined"==typeof process||process;var b="undefined"!=typeof window;function S(e,t){return typeof t===e}"undefined"!=typeof Deno&&Deno,b&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),S.bind(null,"function");var I=S.bind(null,"string"),O=S.bind(null,"undefined");function k(e){var t=e;try{if("true"===(t=JSON.parse(e)))return!0;if("false"===t)return!1;if(function(e){if(!function(e){return e&&("object"==typeof e||null!==e)}(e))return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch(e){}if(null!==t&&""!==t)return t}S.bind(null,"boolean");var h=m(),j=g();function x(e,t){if(e){var o=w(t),n=!N(o),i=A(o)?k(localStorage.getItem(e)):void 0;if(n&&!O(i))return i;var a=L(o)?k(f(e)):void 0;if(n&&a)return a;var l=r(e);return n?l:{localStorage:i,cookie:a,global:l}}}function C(e,o,n){if(e&&!O(o)){var a={},u=w(n),d=JSON.stringify(o),g=!N(u);return A(u)&&(a[p]=T(p,o,k(localStorage.getItem(e))),localStorage.setItem(e,d),g)?a[p]:L(u)&&(a[l]=T(l,o,k(f(e))),c(e,d),g)?a[l]:(a[t]=T(t,o,r(e)),i(e,o),g?a[t]:a)}}function _(e,o){if(e){var n=w(o),r=x(e,"*"),i={};return!O(r.localStorage)&&A(n)&&(localStorage.removeItem(e),i[p]=r.localStorage),!O(r.cookie)&&L(n)&&(d(e),i[l]=r.cookie),!O(r.global)&&D(n,t)&&(a(e),i[t]=r.global),i}}function w(e){return e?I(e)?e:e.storage:y}function A(e){return h&&D(e,p)}function L(e){return j&&D(e,l)}function N(e){return"*"===e||"all"===e}function D(e,t){return e===y||e===t||N(e)}function T(e,t,o){return{location:e,current:t,previous:o}}var J={setItem:C,getItem:x,removeItem:_};e.ALL="*",e.ANY=y,e.COOKIE=l,e.GLOBAL=t,e.LOCAL_STORAGE=p,e.default=J,e.getCookie=f,e.getItem=x,e.globalContext=n,e.hasCookies=g,e.hasLocalStorage=m,e.removeCookie=d,e.removeItem=_,e.setCookie=c,e.setItem=C});
//# sourceMappingURL=storage-utils.umd.js.map
