{"version":3,"file":"cookie-utils.js","sources":["../../../analytics-util-storage-global/dist/analytics-util-global-storage.module.js","../../src/index.js"],"sourcesContent":["var l=\"global\",o=\"undefined\",e=\"object\"==typeof self&&self.self===self&&self||\"object\"==typeof global&&global.global===global&&global||void 0;function f(l){return e[l]}function n(l,o){return e[l]=o,o}function t(l){n(l)}export{l as GLOBAL,f as get,e as globalContext,t as remove,n as set,o as undef};\n//# sourceMappingURL=analytics-util-global-storage.module.js.map\n","import { get, set, remove, undef } from '@analytics/global-storage-utils'\n\nconst COOKIE = 'cookie'\nconst tmp = '__x'\n\nlet isSupported = hasCookies()\n\n/**\n * Get a cookie value\n * @param  {string} name - key of cookie\n * @return {string} value of cookie\n */\nconst getCookie = cookie\n\n/**\n * Set a cookie value\n * @param {string} name  - key of cookie\n * @param {string} value - value of cookie\n * @param {string} days  - days to keep cookie\n */\nconst setCookie = cookie\n\n/**\n * Remove a cookie value.\n * @param {string} name  - key of cookie\n */\nfunction removeCookie(name) {\n  return isSupported ? cookie(name, '', -1) : remove(name) \n}\n\n/**\n * Check if browser has cookie support\n * @returns {boolean}\n */\nfunction hasCookies() {\n  if (typeof isSupported !== undef) {\n    return isSupported\n  }\n  try {\n    // Try to set cookie\n    cookie(tmp, tmp)\n    isSupported = document.cookie.indexOf(tmp) !== -1\n    // Cleanup cookie\n    removeCookie(tmp)\n  } catch (e) {\n    isSupported = false\n  }\n  return isSupported\n}\n\n/** \n  * Cookie setter & getter\n  * @version    1.0.4\n  * @date       2015-03-13\n  * @stability  3 - Stable\n  * @author     Lauri Rooden <lauri@rooden.ee>\n  * @license    MIT License\n  * Modified by David Wells\n  * @param {string} name \n  * @param {*} value \n  * @param {*} ttl - Time to live in seconds\n  * @param {*} path - Cookie domain\n  * @param {*} domain - Cookie domain\n  * @param {Boolean} secure - secure cookie\n  * @returns {*} value\n  * @example\n    cookie('test', 'a') // set\n    cookie('test', 'a', 60*60*24, '/api', '*.example.com', true) // complex set - cookie(name, value, ttl, path, domain, secure)\n    cookie('test') // get\n    cookie('test', '', -1) // destroy\n*/\nfunction cookie(name, value, ttl, path, domain, secure) {\n  if (typeof window === undef) return\n  const isSet = arguments.length > 1\n  /* If cookies not supported fallback to global */\n  if (!isSupported) (isSet) ? set(name, value) : get(name)\n  /* Set values */\n  if (isSet) {\n    // eslint-disable-next-line no-return-assign\n    return document.cookie = name + '=' + encodeURIComponent(value) +\n      // eslint-disable-next-line operator-linebreak\n        ((!ttl) ? '' :\n          // Has TTL set expiration on cookie\n          '; expires=' + new Date(+new Date() + (ttl * 1000)).toUTCString() +\n          // If path set path\n          ((!path) ? '' : '; path=' + path) +\n          // If domain set domain\n          ((!domain) ? '' : '; domain=' + domain) +\n          // If secure set secure\n          ((!secure) ? '' : '; secure'))\n  }\n  /* Get values */\n  return decodeURIComponent((('; ' + document.cookie).split('; ' + name + '=')[1] || '').split(';')[0])\n}\n\nexport {\n  COOKIE,\n  hasCookies,\n  setCookie,\n  getCookie,\n  removeCookie\n}\n"],"names":["undef","globalContext","self","global","this","get","key","set","value","tmp","isSupported","hasCookies","getCookie","cookie","setCookie","removeCookie","name","document","indexOf","e","ttl","path","domain","secure","window","isSet","arguments","length","encodeURIComponent","Date","toUTCString","decodeURIComponent","split"],"mappings":"gCAEaA,EAAQ,YAERC,EACM,iBAATC,MAAqBA,KAAKA,OAASA,MAAQA,MAChC,iBAAXC,QAAuBA,OAAOA,SAAWA,QAAUA,aAAAA,EAC3DC,SAOcC,EAAIC,GAClB,OAAOL,EAAcK,YASPC,EAAID,EAAKE,GAEvB,OADAP,EAAcK,GAAOE,EACdA,MCvBHC,EAAM,MAERC,EAAcC,IAOZC,EAAYC,EAQZC,EAAYD,EAMlB,SAASE,EAAaC,GACpB,OAAON,EAAcG,EAAOG,EAAM,IAAK,QDOvCT,ECPmDS,GAOrD,SAASL,IACP,UAAWD,IAAgBV,EACzB,OAAOU,EAET,IAEEG,EAAOJ,EAAKA,GACZC,GAAgD,IAAlCO,SAASJ,OAAOK,QAAQT,GAEtCM,EAAaN,GACb,MAAOU,GACPT,GAAc,EAEhB,OAAOA,EAwBT,SAASG,EAAOG,EAAMR,EAAOY,EAAKC,EAAMC,EAAQC,GAC9C,UAAWC,SAAWxB,EAAtB,CACA,IAAMyB,EAAQC,UAAUC,OAAS,EAIjC,OAFKjB,IAAce,EAASlB,EAAIS,EAAMR,GAASH,EAAIW,IAE/CS,EAEKR,SAASJ,OAASG,EAAO,IAAMY,mBAAmBpB,IAElDY,EAED,aAAe,IAAIS,MAAM,IAAIA,KAAgB,IAANT,GAAaU,eAEjDT,EAAa,UAAYA,EAAjB,KAERC,EAAe,YAAcA,EAAnB,KAEVC,EAAe,WAAL,IARL,IAWTQ,qBAAqB,KAAOd,SAASJ,QAAQmB,MAAM,KAAOhB,EAAO,KAAK,IAAM,IAAIgB,MAAM,KAAK,qBA1FrF"}